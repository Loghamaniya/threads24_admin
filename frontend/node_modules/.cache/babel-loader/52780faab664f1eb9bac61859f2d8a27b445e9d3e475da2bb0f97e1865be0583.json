{"ast":null,"code":"import{useEffect,useState}from'react';import axios from'axios';import{MDBDataTable}from'mdbreact';import{MDBDatatable,MDBBtn,MDBIcon}from'mdb-react-ui-kit';import'./App.css';import'bootstrap/dist/css/bootstrap.min.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[users,setUsers]=useState([\"\"]);const[find,setFind]=useState([\"\"]);const[searchuser,setSearchuser]=useState([\"\"]);// useEffect(()=>{\n//   fetchData();\n//   // axios.get('http://localhost:5000/threads')\n//   // .then(async(user)=>{\n//   // const a=await setUsers(user.data);\n//   // if(users!==find)\n//   // {\n//   //   setFind(user.data);\n//   // }\n//   // })\n//   // .catch(err=>console.log(err));\n//   // console.log(users);\n// },[find]);\nuseEffect(()=>{fetchData();// Initial fetch\n// Fetch data every 10 seconds (adjust the interval as needed)\nconst interval=setInterval(()=>{fetchData();},10000);// Clean up the interval when the component is unmounted\nreturn()=>clearInterval(interval);},[find]);const fetchData=()=>{console.log(\"called\");axios.get('http://localhost:5000/threads').then(async user=>{await setUsers(user.data);console.log(users===find);if(users!==find){setFind(user.data);}}).catch(err=>console.log(err));};//  const timer=setTimeout(()=>{\n//     fetchData();\n//  },10000);\nconst approvalfunction=async event=>{console.log(event);const userData={email:event};axios.post(\"http://localhost:5000/threads/add\",userData).then(response=>{// const message=response.data.msgg;\nalert(response.data.msgg);fetchData();console.log(response.data.msgg);});};const deletefunction=async event=>{console.log(event);const userData={email:event};axios.post(\"http://localhost:5000/threads/del\",userData).then(response=>{// const message=response.data.msgg;\nalert(response.data.msgg);fetchData();console.log(response.data.msgg);});};const data={columns:[{label:'Phone',field:'number',sort:'asc',width:150},{label:'Name',field:'name',sort:'asc',width:270},{label:'College',field:'selectedCollege',sort:'asc',width:150},{label:'Email',field:'email',sort:'asc',width:200},{label:'UPI',field:'UPI_id',sort:'asc',width:200},{label:'Events',field:'selectedEvents',sort:'asc',width:200},{label:'Workshop',field:'selectedWorkshops',sort:'asc',width:200},{label:'Approve',field:'contact',width:200}],rows:[...users].map(row=>{return{...row,contact:/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:()=>approvalfunction(\"\".concat(row.email)),children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",color:\"red\",onClick:()=>deletefunction(\"\".concat(row.email)),children:\"Del\"})]})};})};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(MDBDataTable,{striped:true,bordered:true,small:true,btn:true,data:data})]});}export default App;","map":{"version":3,"names":["useEffect","useState","axios","MDBDataTable","MDBDatatable","MDBBtn","MDBIcon","jsx","_jsx","jsxs","_jsxs","App","users","setUsers","find","setFind","searchuser","setSearchuser","fetchData","interval","setInterval","clearInterval","console","log","get","then","user","data","catch","err","approvalfunction","event","userData","email","post","response","alert","msgg","deletefunction","columns","label","field","sort","width","rows","map","row","contact","className","children","onClick","concat","color","striped","bordered","small","btn"],"sources":["D:/useage/projects/admin/frontend/src/App.jsx"],"sourcesContent":["import{useEffect,useState} from 'react';\nimport axios from 'axios'\nimport { MDBDataTable } from 'mdbreact';\nimport { MDBDatatable, MDBBtn, MDBIcon } from 'mdb-react-ui-kit';\n\n\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nfunction App() {\n\n  const[users,setUsers]=useState([\"\"]);\n  const[find,setFind]=useState([\"\"]);\n  const[searchuser,setSearchuser]=useState([\"\"]);\n  // useEffect(()=>{\n  //   fetchData();\n  //   // axios.get('http://localhost:5000/threads')\n  //   // .then(async(user)=>{\n  //   // const a=await setUsers(user.data);\n  //   // if(users!==find)\n  //   // {\n  //   //   setFind(user.data);\n  //   // }\n  //   // })\n  //   // .catch(err=>console.log(err));\n  //   // console.log(users);\n  // },[find]);\n\n\n  useEffect(() => {\n    fetchData(); // Initial fetch\n\n    // Fetch data every 10 seconds (adjust the interval as needed)\n    const interval = setInterval(() => {\n      fetchData();\n    }, 10000);\n\n    // Clean up the interval when the component is unmounted\n    return () => clearInterval(interval);\n  }, [find]);\n\n  const fetchData = () => {\n    console.log(\"called\");\n    axios.get('http://localhost:5000/threads')\n      .then(async(user) => {\n        await setUsers(user.data);\n        console.log(users===find);\n        if (users !== find) {\n          setFind(user.data);\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n\n//  const timer=setTimeout(()=>{\n//     fetchData();\n//  },10000);\n\n  const approvalfunction=async(event)=>{\n    console.log(event);\n    const userData={\n      email:event\n    };\n    axios.post(\"http://localhost:5000/threads/add\", userData).then((response) => {\n      // const message=response.data.msgg;\n      alert(response.data.msgg);\n      fetchData();\n      console.log(response.data.msgg);\n    });\n\n   \n  }\n\n  const deletefunction=async(event)=>{\n    console.log(event);\n    const userData={\n      email:event\n    };\n    axios.post(\"http://localhost:5000/threads/del\", userData).then((response) => {\n      // const message=response.data.msgg;\n      alert(response.data.msgg);\n      fetchData();\n      console.log(response.data.msgg);\n    });\n\n   \n  }\n\n  const data = {\n    columns: [\n      {\n        label: 'Phone',\n        field: 'number',\n        sort: 'asc',\n        width: 150\n      },\n      {\n        label: 'Name',\n        field: 'name',\n        sort: 'asc',\n        width: 270\n      },\n      {\n        label: 'College',\n        field: 'selectedCollege',\n        sort: 'asc',\n        width: 150\n      },\n      {\n        label: 'Email',\n        field: 'email',\n        sort: 'asc',\n        width: 200\n      },\n      {\n        label: 'UPI',\n        field: 'UPI_id',\n        sort: 'asc',\n        width: 200\n      },\n      {\n        label: 'Events',\n        field: 'selectedEvents',\n        sort: 'asc',\n        width: 200\n      },\n      {\n        label: 'Workshop',\n        field: 'selectedWorkshops',\n        sort: 'asc',\n        width: 200\n      },\n      {\n        label: 'Approve',\n        field: 'contact',\n        width:200\n      }\n     \n    ],\n    rows:[...users].map((row) => {\n      return {\n        ...row,\n        contact: (\n          <div className=\"button-container\"><button className=\"btn btn-success\" onClick={() =>approvalfunction(`${row.email}`)}>Add</button>\n          <button className=\"btn btn-danger\" color='red' onClick={() =>deletefunction(`${row.email}`)}>Del</button>\n         \n            \n          </div>\n        ),\n      };\n    }),\n     \n      \n    \n  };\n\n  return (\n    <div>\n      <br></br>\n      <MDBDataTable\n      striped\n      bordered\n      small\n      btn\n      data={data}\n    />\n    \n    </div>\n \n  );\n}\n\nexport default App;\n\n"],"mappings":"AAAA,OAAOA,SAAS,CAACC,QAAQ,KAAO,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,YAAY,KAAQ,UAAU,CACvC,OAASC,YAAY,CAAEC,MAAM,CAAEC,OAAO,KAAQ,kBAAkB,CAGhE,MAAO,WAAW,CAClB,MAAO,sCAAsC,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7C,QAAS,CAAAC,GAAGA,CAAA,CAAG,CAEb,KAAK,CAACC,KAAK,CAACC,QAAQ,CAAC,CAACZ,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CACpC,KAAK,CAACa,IAAI,CAACC,OAAO,CAAC,CAACd,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAClC,KAAK,CAACe,UAAU,CAACC,aAAa,CAAC,CAAChB,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGAD,SAAS,CAAC,IAAM,CACdkB,SAAS,CAAC,CAAC,CAAE;AAEb;AACA,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjCF,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,KAAK,CAAC,CAET;AACA,MAAO,IAAMG,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,CAACL,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAI,SAAS,CAAGA,CAAA,GAAM,CACtBI,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrBrB,KAAK,CAACsB,GAAG,CAAC,+BAA+B,CAAC,CACvCC,IAAI,CAAC,KAAM,CAAAC,IAAI,EAAK,CACnB,KAAM,CAAAb,QAAQ,CAACa,IAAI,CAACC,IAAI,CAAC,CACzBL,OAAO,CAACC,GAAG,CAACX,KAAK,GAAGE,IAAI,CAAC,CACzB,GAAIF,KAAK,GAAKE,IAAI,CAAE,CAClBC,OAAO,CAACW,IAAI,CAACC,IAAI,CAAC,CACpB,CACF,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAKP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC,CAAC,CACrC,CAAC,CAGH;AACA;AACA;AAEE,KAAM,CAAAC,gBAAgB,CAAC,KAAM,CAAAC,KAAK,EAAG,CACnCT,OAAO,CAACC,GAAG,CAACQ,KAAK,CAAC,CAClB,KAAM,CAAAC,QAAQ,CAAC,CACbC,KAAK,CAACF,KACR,CAAC,CACD7B,KAAK,CAACgC,IAAI,CAAC,mCAAmC,CAAEF,QAAQ,CAAC,CAACP,IAAI,CAAEU,QAAQ,EAAK,CAC3E;AACAC,KAAK,CAACD,QAAQ,CAACR,IAAI,CAACU,IAAI,CAAC,CACzBnB,SAAS,CAAC,CAAC,CACXI,OAAO,CAACC,GAAG,CAACY,QAAQ,CAACR,IAAI,CAACU,IAAI,CAAC,CACjC,CAAC,CAAC,CAGJ,CAAC,CAED,KAAM,CAAAC,cAAc,CAAC,KAAM,CAAAP,KAAK,EAAG,CACjCT,OAAO,CAACC,GAAG,CAACQ,KAAK,CAAC,CAClB,KAAM,CAAAC,QAAQ,CAAC,CACbC,KAAK,CAACF,KACR,CAAC,CACD7B,KAAK,CAACgC,IAAI,CAAC,mCAAmC,CAAEF,QAAQ,CAAC,CAACP,IAAI,CAAEU,QAAQ,EAAK,CAC3E;AACAC,KAAK,CAACD,QAAQ,CAACR,IAAI,CAACU,IAAI,CAAC,CACzBnB,SAAS,CAAC,CAAC,CACXI,OAAO,CAACC,GAAG,CAACY,QAAQ,CAACR,IAAI,CAACU,IAAI,CAAC,CACjC,CAAC,CAAC,CAGJ,CAAC,CAED,KAAM,CAAAV,IAAI,CAAG,CACXY,OAAO,CAAE,CACP,CACEC,KAAK,CAAE,OAAO,CACdC,KAAK,CAAE,QAAQ,CACfC,IAAI,CAAE,KAAK,CACXC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,MAAM,CACbC,KAAK,CAAE,MAAM,CACbC,IAAI,CAAE,KAAK,CACXC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,SAAS,CAChBC,KAAK,CAAE,iBAAiB,CACxBC,IAAI,CAAE,KAAK,CACXC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,OAAO,CACdC,KAAK,CAAE,OAAO,CACdC,IAAI,CAAE,KAAK,CACXC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,KAAK,CACZC,KAAK,CAAE,QAAQ,CACfC,IAAI,CAAE,KAAK,CACXC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,QAAQ,CACfC,KAAK,CAAE,gBAAgB,CACvBC,IAAI,CAAE,KAAK,CACXC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,UAAU,CACjBC,KAAK,CAAE,mBAAmB,CAC1BC,IAAI,CAAE,KAAK,CACXC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,SAAS,CAChBC,KAAK,CAAE,SAAS,CAChBE,KAAK,CAAC,GACR,CAAC,CAEF,CACDC,IAAI,CAAC,CAAC,GAAGhC,KAAK,CAAC,CAACiC,GAAG,CAAEC,GAAG,EAAK,CAC3B,MAAO,CACL,GAAGA,GAAG,CACNC,OAAO,cACLrC,KAAA,QAAKsC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAACzC,IAAA,WAAQwC,SAAS,CAAC,iBAAiB,CAACE,OAAO,CAAEA,CAAA,GAAKpB,gBAAgB,IAAAqB,MAAA,CAAIL,GAAG,CAACb,KAAK,CAAE,CAAE,CAAAgB,QAAA,CAAC,KAAG,CAAQ,CAAC,cAClIzC,IAAA,WAAQwC,SAAS,CAAC,gBAAgB,CAACI,KAAK,CAAC,KAAK,CAACF,OAAO,CAAEA,CAAA,GAAKZ,cAAc,IAAAa,MAAA,CAAIL,GAAG,CAACb,KAAK,CAAE,CAAE,CAAAgB,QAAA,CAAC,KAAG,CAAQ,CAAC,EAGpG,CAET,CAAC,CACH,CAAC,CAIH,CAAC,CAED,mBACEvC,KAAA,QAAAuC,QAAA,eACEzC,IAAA,QAAQ,CAAC,cACTA,IAAA,CAACL,YAAY,EACbkD,OAAO,MACPC,QAAQ,MACRC,KAAK,MACLC,GAAG,MACH7B,IAAI,CAAEA,IAAK,CACZ,CAAC,EAEG,CAAC,CAGV,CAEA,cAAe,CAAAhB,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}